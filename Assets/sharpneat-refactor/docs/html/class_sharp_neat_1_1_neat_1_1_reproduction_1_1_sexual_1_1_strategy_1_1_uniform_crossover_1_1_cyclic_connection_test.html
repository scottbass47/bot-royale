<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SharpNEAT: SharpNeat.Neat.Reproduction.Sexual.Strategy.UniformCrossover.CyclicConnectionTest Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SharpNEAT
   </div>
   <div id="projectbrief">C# implementation of NEAT</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_sharp_neat_1_1_neat_1_1_reproduction_1_1_sexual_1_1_strategy_1_1_uniform_crossover_1_1_cyclic_connection_test.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_sharp_neat_1_1_neat_1_1_reproduction_1_1_sexual_1_1_strategy_1_1_uniform_crossover_1_1_cyclic_connection_test-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SharpNeat.Neat.Reproduction.Sexual.Strategy.UniformCrossover.CyclicConnectionTest Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>For testing if a proposed new connection on a NEAT genome would form a connectivity cycle.  
 <a href="class_sharp_neat_1_1_neat_1_1_reproduction_1_1_sexual_1_1_strategy_1_1_uniform_crossover_1_1_cyclic_connection_test.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa7e7d8bbc6a0ee3f2e8af383927226b8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sharp_neat_1_1_neat_1_1_reproduction_1_1_sexual_1_1_strategy_1_1_uniform_crossover_1_1_cyclic_connection_test.html#aa7e7d8bbc6a0ee3f2e8af383927226b8">IsConnectionCyclic</a> (IList&lt; <a class="el" href="struct_sharp_neat_1_1_network_1_1_directed_connection.html">DirectedConnection</a> &gt; connList, in <a class="el" href="struct_sharp_neat_1_1_network_1_1_directed_connection.html">DirectedConnection</a> newConn)</td></tr>
<tr class="memdesc:aa7e7d8bbc6a0ee3f2e8af383927226b8"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="namespace_sharp_neat_1_1_tests.html">Tests</a> if the proposed new connection newConn would form a cycle if added to the existing directed acyclic graph described by connArr.  <a href="class_sharp_neat_1_1_neat_1_1_reproduction_1_1_sexual_1_1_strategy_1_1_uniform_crossover_1_1_cyclic_connection_test.html#aa7e7d8bbc6a0ee3f2e8af383927226b8">More...</a><br /></td></tr>
<tr class="separator:aa7e7d8bbc6a0ee3f2e8af383927226b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>For testing if a proposed new connection on a NEAT genome would form a connectivity cycle. </p>
<p>This class utilises a depth first graph traversal algorithm to check if a proposed new connection on a given graph would form a cycle, as such it is assumed that the graph as given is acyclic, if it isn't then the graph traversal stack will grown to infinity, ultimately resulting in an OutOfMemory exception.</p>
<p>The algorithm will perform a full depth first traversal of the graph starting at the proposed new connection's target node, and if that connection's source node is encountered then it would form a cycle if it were added to the graph.</p>
<p>Each instance of this class allocates a stack and a hashset for use by the traversal algorithm, and these are cleared and re-used for each call to <a class="el" href="class_sharp_neat_1_1_neat_1_1_reproduction_1_1_sexual_1_1_strategy_1_1_uniform_crossover_1_1_cyclic_connection_test.html#aa7e7d8bbc6a0ee3f2e8af383927226b8" title="Tests if the proposed new connection newConn would form a cycle if added to the existing directed acy...">IsConnectionCyclic()</a>. This avoids memory re-allocation and garbage collection overhead, but the side effect is that <a class="el" href="class_sharp_neat_1_1_neat_1_1_reproduction_1_1_sexual_1_1_strategy_1_1_uniform_crossover_1_1_cyclic_connection_test.html#aa7e7d8bbc6a0ee3f2e8af383927226b8" title="Tests if the proposed new connection newConn would form a cycle if added to the existing directed acy...">IsConnectionCyclic()</a> is not reentrant, i.e. can only be in use by one execution thread at a given point in time. A reentrancy check will throw an exception if reentrancy is attempted.</p>
<h2><a class="anchor" id="autotoc_md0"></a>
Implementation Details / Notes</h2>
<p>This class is optimized for speed and efficiency and as such is tightly coupled with the connection gene list data structure, and is perhaps not as easy to read/understand as a traditional depth first graph traversal algorithm using function recursion. However this is essentially a depth first graph traversal algorithm that utilises its own stack instead of using the call stack.</p>
<p>The traversal stack is a stack of Int32(s), each of which is an index into connList (the list of connections that make up the graph, ordered by sourceId and then targetId). Thus, each stack entry points to a connection, and represents traversal of that connection's source node and also which of that node's child connections/nodes is the current traversal position/path from that node (note. this works because the connections are sorted by sourceId first).</p>
<p>As such this algorithm has a far more compact stack frame than the equivalent algorithm implemented as a recursive function, and avoids any other method call overhead as a further performance benefit (i.e. overhead other than stack frame initialisation).</p>
<p>The main optimizations then are:</p>
<ul>
<li>No method call overhead from recursive method calls.</li>
<li>Each stack frame is a single int32 and thus the stack as a whole is highly compact; this improves CPU cache locality and hit rate, and also keeps the max size of the stack for any given traversal at a minimum.</li>
<li>The stack and a visitedNodes HashSet are allocated for each class instance and are cleared and re-used for each call to <a class="el" href="class_sharp_neat_1_1_neat_1_1_reproduction_1_1_sexual_1_1_strategy_1_1_uniform_crossover_1_1_cyclic_connection_test.html#aa7e7d8bbc6a0ee3f2e8af383927226b8" title="Tests if the proposed new connection newConn would form a cycle if added to the existing directed acy...">IsConnectionCyclic()</a>, therefore minimizing memory allocation and garbage collection overhead.</li>
<li>Using a stack on the heap also avoids any potential for a stack overflow on very deep graphs, which could occur if using method call recursion.</li>
</ul>
<p>Problems with the approach of this class are:</p>
<ul>
<li>The code is more complex than the same algorithm written as a recursive function; this makes the code harder to read, understand and maintain, thus increasing the probability of subtle defects.</li>
</ul>
<p>Also see: <a class="el" href="class_sharp_neat_1_1_network_1_1_acyclic_1_1_cyclic_connection_test.html" title="For testing if a new connection would form a connectivity cycle in an existing acyclic digraph.">SharpNeat.Network.Acyclic.CyclicConnectionTest</a> <a class="el" href="class_sharp_neat_1_1_network_1_1_acyclic_1_1_acyclic_graph_depth_analysis.html" title="An algorithm for calculating the depth of each node in an acyclic graph.">SharpNeat.Network.Acyclic.AcyclicGraphDepthAnalysis</a> <a class="el" href="class_sharp_neat_1_1_network_1_1_cyclic_graph_analysis.html" title="An algorithm for testing whether a given graph is cyclic or acyclic, i.e. does a given graph have a c...">SharpNeat.Network.CyclicGraphAnalysis</a> </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aa7e7d8bbc6a0ee3f2e8af383927226b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7e7d8bbc6a0ee3f2e8af383927226b8">&#9670;&nbsp;</a></span>IsConnectionCyclic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SharpNeat.Neat.Reproduction.Sexual.Strategy.UniformCrossover.CyclicConnectionTest.IsConnectionCyclic </td>
          <td>(</td>
          <td class="paramtype">IList&lt; <a class="el" href="struct_sharp_neat_1_1_network_1_1_directed_connection.html">DirectedConnection</a> &gt;&#160;</td>
          <td class="paramname"><em>connList</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">in <a class="el" href="struct_sharp_neat_1_1_network_1_1_directed_connection.html">DirectedConnection</a>&#160;</td>
          <td class="paramname"><em>newConn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="namespace_sharp_neat_1_1_tests.html">Tests</a> if the proposed new connection newConn would form a cycle if added to the existing directed acyclic graph described by connArr. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">connList</td><td>A set of connections that describe a directed acyclic graph.</td></tr>
    <tr><td class="paramname">newConn</td><td>A proposed new connection to add to the graph.</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/SharpNeatLib/Neat/Reproduction/Sexual/Strategy/UniformCrossover/CyclicConnectionTest.cs</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_sharp_neat.html">SharpNeat</a></li><li class="navelem"><a class="el" href="namespace_sharp_neat_1_1_neat.html">Neat</a></li><li class="navelem"><a class="el" href="namespace_sharp_neat_1_1_neat_1_1_reproduction.html">Reproduction</a></li><li class="navelem"><a class="el" href="namespace_sharp_neat_1_1_neat_1_1_reproduction_1_1_sexual.html">Sexual</a></li><li class="navelem"><a class="el" href="namespace_sharp_neat_1_1_neat_1_1_reproduction_1_1_sexual_1_1_strategy.html">Strategy</a></li><li class="navelem"><a class="el" href="namespace_sharp_neat_1_1_neat_1_1_reproduction_1_1_sexual_1_1_strategy_1_1_uniform_crossover.html">UniformCrossover</a></li><li class="navelem"><a class="el" href="class_sharp_neat_1_1_neat_1_1_reproduction_1_1_sexual_1_1_strategy_1_1_uniform_crossover_1_1_cyclic_connection_test.html">CyclicConnectionTest</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
